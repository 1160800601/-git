!function(g){g(function(){var c=g(".current_vid_cat"),t=g.trim(g(".video-post-title").text()),e=g.trim(c.text()),u={},n=".vid-small-title-image",r="",s="vposition-",p=0,i=!1,a=!1,o=!1,v=jwplayer("jw-container");if(0!==g("#jw-container").length){if("undefined"!=typeof digitalData&&"undefined"==typeof adUpgrade){var d=g(".main_vid_date").html(),l=g(".main_vid_author").html();digitalData.pageName="IBD Videos",digitalData.channel="IBD Videos",digitalData.contentType="Video Landing Page",digitalData.videoName=e+" - "+t,digitalData.videoCategory=e,digitalData.videoPublishDate=d,digitalData.videoAuthors=l}u.getPlaylist=function(t){var e,i=[],a={},o=t.attr("vid-url"),d=t.data("captions"),l=g.trim(g(".video-post-title").text()),n=(g.trim(c.text()),[]);return window.videosClickable=!1,r=t.data("post-id"),""===(p=window.InvestorsUtils.Cookie.getCookie(s+r))&&(p=0),a=o&&void 0!==Modernizr.touch?[{file:o,default:"true"},{file:o}]:o&&!Modernizr.touch?[{file:o},{"file:":o,default:"true"}]:[{file:o}],e=d?(g.each(d,function(t,e){n.push({file:e.url,label:e.name,kind:"captions"})}),{sources:a,title:l,tracks:n}):{sources:a,title:l},i.push(e),i},u.playerSetup=function(t,e){v.setup({playlist:t,width:"100%",aspectratio:"16:9",skin:"bekle",autostart:!0,mute:e.mute||!1,advertising:{client:"googima",tag:window.GenerateVideoAdUrl&&window.GenerateVideoAdUrl(e.id,e.cat,{s1:"ibd-videos"})},visualplaylist:!1,repeat:!0}).on("play",function(t){void 0!==v.getConfig().duration&&(digitalData.videoLength=Math.round(v.getConfig().duration)),"undefined"!==t&&"paused"===t.oldstate&&_satellite.track("resumeplay"),window.videosClickable=!0}).on("playlistItem",function(){var t,e,i,a=v.getPlaylistIndex(),o=g("li.featured"),d=o.eq(a),l=g("li.featured .videotitle").eq(a).text(),n=d.data("video-excerpt");o.removeClass("recent-active"),d.addClass("recent-active"),g(".main-feat-video h1").text(l),g(".main-feat-video .fspan").text(n),g(".main-feat-video").data("permalink",d.data("permalink")),g(".main-feat-video a").attr("href",d.data("permalink")),(t=g(this).data("impression"))&&(t+=(new Date).getTime(),(i=g('<img id="impressions-pixel">')).attr("src",t),i.appendTo("body"));(e=g(this).data("vid-start"))&&((i=g('<img id="vidstart-pixel">')).attr("src",e),i.appendTo("body"))}).on("firstFrame",function(){o=a=i=!1;try{_satellite.track("videostart")}catch(t){console.log("DTM Error")}0<p&&v.seek(p)}).on("time",function(){try{!i&&.25<v.getPosition()/v.getDuration()&&(i=!0,_satellite.track("video25")),!a&&.5<v.getPosition()/v.getDuration()&&(a=!0,_satellite.track("video50")),!o&&.75<v.getPosition()/v.getDuration()&&(o=!0,_satellite.track("video75"))}catch(t){console.log("DTM Error: "+t)}v.getPosition()<v.getDuration()?window.InvestorsUtils.Cookie.setCookie(s+r,v.getPosition(),30):window.InvestorsUtils.Cookie.deleteCookie(s+r)}).on("beforeComplete",function(){var t,e,i,a=v.getPosition(),o=(a=Math.round(a),g(this).data("vid-end"));try{_satellite.track("videocomplete")}catch(t){console.log("DTM Error")}if(o&&(o=o.replace("[time]",a),(t=g('<img id="vidpause-pixel">')).attr("src",o),t.appendTo("body")),-1!==(e=g("li.featured").index(g("li.recent-active").next())))v.playlistItem(e);else{var d=v.getPlaylistItem().file,l=g('.vid_item [vid-url="'+d+'"]').parents(".vid_item").next().find(n);i=g(n).first(),0!==l.length?u.playVideo(l):0!==i.length?u.playVideo(i):v.stop()}}).on("mute",function(t){void 0!==t&&!0===t.mute?_satellite.track("volumemute"):_satellite.track("volumeunmuted")}).on("pause",function(){var t,e,i=v.getPosition();_satellite.track("pause"),console.log("viewTime",i),i=Math.round(i),(e=g(".recent-active").data("vidEnd"))&&(e=e.replace("[time]",i),(t=g('<img id="vidpause-pixel">')).attr("src",e),t.appendTo("body"))}).on("adPlay",function(){_satellite.track("prerollstart")}).on("adComplete",function(){_satellite.track("prerollend")})},u.playVideo=function(t){var e=g(t).attr("vid-date"),i=g(t).attr("vid-author"),a=g(t).attr("id"),o=g("."+a+"-thumb-title"),d=g(o).html(),l=g(o).attr("title"),n=g(t).attr("vid-permalink"),r=g(".main_vid_date"),s=r.html();g(".video-post-title").attr("id",a).attr("vid-title",d).html(d),c.html(l),g(".main_vid_author").html(i),r.html(e),"object"==typeof carouselVideoData&&carouselVideoData.hasOwnProperty(a)&&(g(".video-post-desc").html(carouselVideoData[a].description||""),g(".addtoany_share_save_container").html(carouselVideoData[a].social_links||""),m(g(o).text(),g(".video-post-desc").text(),n)),"undefined"!=typeof digitalData&&"undefined"==typeof adUpgrade&&(digitalData.pageName="IBD Videos",digitalData.channel="IBD Videos",digitalData.contentType="Video Landing Page",digitalData.videoName=l+" - "+d,digitalData.videoCategory=l,digitalData.videoPublishDate=s,digitalData.videoLength=Math.round(v.getConfig().duration),digitalData.videoAuthors=i),g(".addtoany_list").attr("data-a2a-title",d).attr("data-a2a-url",n),g(".play_button").removeClass("current_vid"),g("."+a+"-play").addClass("current_vid"),_satellite.track("videoView"),u.playerSetup(u.getPlaylist(t),{id:t.data("post-id"),cat:l,mute:t.data("mute")})},u.playerSetup(u.getPlaylist(c),{id:c.data("post-id"),cat:e,mute:c.data("mute")}),g(".most-recent li").click(function(){var t;if(!window.videosClickable)return!1;g("html,body").animate({scrollTop:0},500),t=g("li.featured").index(g(this)),window.videosClickable=!1,v.playlistItem(t)}),g(document).on("click",n,function(){window.scrollTo(0,0),u.playVideo(g(this))}),m(g(".video-post-title").text(),g(".video-post-desc").text(),c.attr("vid-permalink"))}function m(t,e,i){if(a2a_config){var a=(new DOMParser).parseFromString("<!doctype html><body>"+e,"text/html").body.textContent;a2a_config.templates.email={subject:t,body:a+"\n"+i}}}})}(jQuery);
//# sourceMappingURL=jwplayerInit.js.map